<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data | Impact of Criminal Policy Changes on Crime Rate in the United States</title>
  <meta name="description" content="Chapter 3 Data | Impact of Criminal Policy Changes on Crime Rate in the United States" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data | Impact of Criminal Policy Changes on Crime Rate in the United States" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data | Impact of Criminal Policy Changes on Crime Rate in the United States" />
  
  
  

<meta name="author" content="Naishadh Parmar and Lylybell Teran" />


<meta name="date" content="2022-12-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="proposal.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Crime Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic-impact-of-criminal-policy-changes-on-crime-rate-in-the-united-states"><i class="fa fa-check"></i><b>2.1</b> Research topic: Impact of Criminal Policy Changes on Crime Rate in the United States</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="proposal.html"><a href="proposal.html#crime"><i class="fa fa-check"></i><b>2.2.1</b> Crime</a></li>
<li class="chapter" data-level="2.2.2" data-path="proposal.html"><a href="proposal.html#imprisonment"><i class="fa fa-check"></i><b>2.2.2</b> Imprisonment</a></li>
<li class="chapter" data-level="2.2.3" data-path="proposal.html"><a href="proposal.html#justice-policy-changes"><i class="fa fa-check"></i><b>2.2.3</b> Justice policy changes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#crime-1"><i class="fa fa-check"></i><b>3.1.1</b> Crime</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#imprisonment-1"><i class="fa fa-check"></i><b>3.1.2</b> Imprisonment</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.2</b> Cleaning / transformation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#crime-2"><i class="fa fa-check"></i><b>3.2.1</b> Crime</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#imprisonment-2"><i class="fa fa-check"></i><b>3.2.2</b> Imprisonment</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.3</b> Missing value analysis</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#crime-3"><i class="fa fa-check"></i><b>3.3.1</b> Crime</a></li>
<li class="chapter" data-level="3.3.2" data-path="data.html"><a href="data.html#imprisonment-3"><i class="fa fa-check"></i><b>3.3.2</b> Imprisonment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Impact of Criminal Policy Changes on Crime Rate in the United States</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="sources" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Sources<a href="data.html#sources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As described in the proposal, we look at three types of data over time:</p>
<div id="crime-1" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Crime<a href="data.html#crime-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Crime data is sourced using the <a href="https://www.fbi.gov/how-we-can-help-you/need-an-fbi-service-or-more-information/ucr" title="Uniform Crime Reporting (UCR) program">Uniform Crime Reporting (UCR) program</a>. More than 18,000 law enforcement agencies at different administrative levels (from federal to city) voluntarily submit data to the state UCR or directly to FBI’s UCR. The UCR program is used by criminal justice researchers and students.</p>
<p>Yearwise UCR data is visited using the <a href="https://ucr.fbi.gov/crime-in-the-u.s/">index of UCR publications</a>. In the proposal, we had planned to extract data of 1995 to 1998 as well, but these are in pdf format and was turning out to be rather difficult to extract. Besides, we can take data from 1999 as well to roughly compare the Bush administration vs the Obama administration in terms of crime. From 1999 to 2019, crime data is directly available in Table 5 (except for 2016, where the data is available in Table 3) in xls format categorized by state, nature of offense and kind of area.</p>
</div>
<div id="imprisonment-1" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Imprisonment<a href="data.html#imprisonment-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Imprisonment data is sourced from the <a href="https://bjs.ojp.gov/data-collection/national-prisoner-statistics-nps-program">National Prisoner Statistics (NPS) program</a>. The Bureau of Justice Statistics has compiled data from NPS as quick tables. We use <a href="https://csat.bjs.ojp.gov/assets/documents/QT_total%20admissions_total.xlsx">total number of prison admissions from 1978 to 2019</a>, and <a href="https://csat.bjs.ojp.gov/assets/documents/QT_total%20releases_total.xlsx">total number of prison releases from 1978 to 2019</a>. In the proposal we only decided upon the previously mentioned dataset, however we are also exploring <a href="https://csat.bjs.ojp.gov/assets/documents/QT_imprisonment%20rate_total.xlsx">imprisonment rate of sentenced prisoners from 1978 to 2019</a>. This will allow us to see the rate which is the number of prisoners under state or federal jurisdiction with a sentence of more than 1 year per 100,000 U.S. residents.</p>
</div>
</div>
<div id="cleaning-transformation" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Cleaning / transformation<a href="data.html#cleaning-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="crime-2" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Crime<a href="data.html#crime-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Raw crime data across all years is made in Excel and doesn’t have a clear table structure. For example,</p>
<div class="figure">
<img src="figures/Data_snapshot.png" alt="" />
<p class="caption">Snapshot of data</p>
</div>
<p>Data from 1999-2002 have a similar format so they are extracted using <code>data_collection/1999-2002.R</code>. Data from 2003 and 2004 are peculiar so they ar extracted using <code>data_collection/2003.R</code> and <code>data_collection/2004.R</code>. Data from 2013-2016 have a similar format so they are extracted using <code>data_collection/2013-2016.R</code>. The rest of the data is extracted using <code>data_collection/2005-2012, 2017-2019.R</code>. The xls links to these years is saved in <code>metadata/crime_data_links.csv</code> so that we don’t have to hardcode URLs.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="data.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="data.html#cb1-3" aria-hidden="true" tabindex="-1"></a>crimes_links <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;metadata/crime_data_links.csv&#39;</span>)</span>
<span id="cb1-4"><a href="data.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;data_collection/1999-2002.R&quot;</span>, <span class="at">local =</span> knitr<span class="sc">::</span><span class="fu">knit_global</span>())</span>
<span id="cb1-5"><a href="data.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;data_collection/2003.R&quot;</span>, <span class="at">local =</span> knitr<span class="sc">::</span><span class="fu">knit_global</span>())</span>
<span id="cb1-6"><a href="data.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;data_collection/2004.R&quot;</span>, <span class="at">local =</span> knitr<span class="sc">::</span><span class="fu">knit_global</span>())</span>
<span id="cb1-7"><a href="data.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;data_collection/2005-2012, 2017-2019.R&quot;</span>, <span class="at">local =</span> knitr<span class="sc">::</span><span class="fu">knit_global</span>())</span>
<span id="cb1-8"><a href="data.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;data_collection/2013-2016.R&quot;</span>, <span class="at">local =</span> knitr<span class="sc">::</span><span class="fu">knit_global</span>())</span>
<span id="cb1-9"><a href="data.html#cb1-9" aria-hidden="true" tabindex="-1"></a>crime_all_data <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb1-10"><a href="data.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(year <span class="cf">in</span> <span class="dv">1999</span><span class="sc">:</span><span class="dv">2002</span>) {</span>
<span id="cb1-11"><a href="data.html#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.null</span>(crime_all_data)) crime_all_data <span class="ot">&lt;-</span> <span class="fu">getdata.1999</span>(crimes_links, year)</span>
<span id="cb1-12"><a href="data.html#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> crime_all_data <span class="ot">=</span> <span class="fu">bind_rows</span>(crime_all_data, <span class="fu">getdata.1999</span>(crimes_links, year))</span>
<span id="cb1-13"><a href="data.html#cb1-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-14"><a href="data.html#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(year <span class="cf">in</span> <span class="dv">2003</span><span class="sc">:</span><span class="dv">2003</span>) crime_all_data <span class="ot">=</span> <span class="fu">bind_rows</span>(crime_all_data, <span class="fu">getdata.2003</span>(crimes_links, year))</span>
<span id="cb1-15"><a href="data.html#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(year <span class="cf">in</span> <span class="dv">2004</span><span class="sc">:</span><span class="dv">2004</span>) crime_all_data <span class="ot">=</span> <span class="fu">bind_rows</span>(crime_all_data, <span class="fu">getdata.2004</span>(crimes_links, year))</span>
<span id="cb1-16"><a href="data.html#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(year <span class="cf">in</span> <span class="dv">2005</span><span class="sc">:</span><span class="dv">2012</span>) crime_all_data <span class="ot">=</span> <span class="fu">bind_rows</span>(crime_all_data, <span class="fu">getdata.2005</span>(crimes_links, year))</span>
<span id="cb1-17"><a href="data.html#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(year <span class="cf">in</span> <span class="dv">2013</span><span class="sc">:</span><span class="dv">2016</span>) crime_all_data <span class="ot">=</span> <span class="fu">bind_rows</span>(crime_all_data, <span class="fu">getdata.2013</span>(crimes_links, year))</span>
<span id="cb1-18"><a href="data.html#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(year <span class="cf">in</span> <span class="dv">2017</span><span class="sc">:</span><span class="dv">2019</span>) crime_all_data <span class="ot">=</span> <span class="fu">bind_rows</span>(crime_all_data, <span class="fu">getdata.2005</span>(crimes_links, year))</span></code></pre></div>
<p>Some of the states were read with a whitespace or a comma so we’ll clean that up.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-2"><a href="data.html#cb2-2" aria-hidden="true" tabindex="-1"></a>crime_all_data[<span class="st">&#39;State&#39;</span>] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(crime_all_data[<span class="st">&#39;State&#39;</span>], <span class="cf">function</span>(x) <span class="fu">str_trim</span>(<span class="fu">gsub</span>(<span class="st">&#39;,&#39;</span>, <span class="st">&#39;&#39;</span>, x)))</span>
<span id="cb2-3"><a href="data.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(<span class="fu">unique</span>(crime_all_data[<span class="st">&#39;State&#39;</span>])))</span></code></pre></div>
<pre><code>## [1] 52</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(crime_all_data<span class="sc">$</span>State)</span></code></pre></div>
<p>As stated in the <a href="https://ucr.fbi.gov/crime-in-the-u.s/2003/03sec1.pdf" title="Uniform Crime Reporting (UCR) program">2003 crime report summary</a>, they started referring to rural counties as metropolitan counties, so we change the area name in the previous years for one-to-one correspondence. In the District of Columbia, the report saves the district-wide crime numbers as “Total” instead of “State Total” since DC is not technically a state. We change the label of that as well to “State Total” just for one-to-one correspondence.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data.html#cb5-1" aria-hidden="true" tabindex="-1"></a>crime_all_data[crime_all_data[<span class="st">&#39;Area&#39;</span>] <span class="sc">==</span> <span class="st">&#39;Rural&#39;</span>, <span class="st">&#39;Area&#39;</span>] <span class="ot">&lt;-</span> <span class="st">&#39;Nonmetropolitan counties&#39;</span></span>
<span id="cb5-2"><a href="data.html#cb5-2" aria-hidden="true" tabindex="-1"></a>crime_all_data[crime_all_data[<span class="st">&#39;Area&#39;</span>] <span class="sc">==</span> <span class="st">&#39;Total&#39;</span>, <span class="st">&#39;Area&#39;</span>] <span class="ot">&lt;-</span> <span class="st">&#39;State Total&#39;</span></span>
<span id="cb5-3"><a href="data.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(crime_all_data[<span class="st">&#39;Area&#39;</span>])</span></code></pre></div>
<pre><code>##                                Area
## 1     Metropolitan Statistical Area
## 2 Cities outside metropolitan areas
## 3          Nonmetropolitan counties
## 4                       State Total</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data.html#cb7-1" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Area <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(crime_all_data<span class="sc">$</span>Area)</span></code></pre></div>
<p>Finally, we also convert the year to a factor and the rest of the numbers to integer</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data.html#cb8-1" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(crime_all_data<span class="sc">$</span>Year)</span>
<span id="cb8-2"><a href="data.html#cb8-2" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Population <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Population)</span>
<span id="cb8-3"><a href="data.html#cb8-3" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Violent <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Violent)</span>
<span id="cb8-4"><a href="data.html#cb8-4" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Property <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Property)</span>
<span id="cb8-5"><a href="data.html#cb8-5" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Murder <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Murder)</span>
<span id="cb8-6"><a href="data.html#cb8-6" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Rape <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Rape)</span>
<span id="cb8-7"><a href="data.html#cb8-7" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Robbery <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Robbery)</span>
<span id="cb8-8"><a href="data.html#cb8-8" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Assault <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Assault)</span>
<span id="cb8-9"><a href="data.html#cb8-9" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Burglary <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Burglary)</span>
<span id="cb8-10"><a href="data.html#cb8-10" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Theft <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Theft)</span>
<span id="cb8-11"><a href="data.html#cb8-11" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Motor <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Motor)</span>
<span id="cb8-12"><a href="data.html#cb8-12" aria-hidden="true" tabindex="-1"></a>crime_all_data<span class="sc">$</span>Arson <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(crime_all_data<span class="sc">$</span>Arson)</span></code></pre></div>
</div>
<div id="imprisonment-2" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Imprisonment<a href="data.html#imprisonment-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We initiate the exploration of imprisonment data by reading in the files using <code>read_excel</code> function. Then we proceed to eliminate extra columns such as “Jurisdiction” since it is not necessary to conduct our analysis. We also properly rename our desired columns into State, Year, and Number of Prisoners.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in admissions excel file</span></span>
<span id="cb9-2"><a href="data.html#cb9-2" aria-hidden="true" tabindex="-1"></a>admissions_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_collection/QT_total admissions_total.xlsx&quot;</span>, <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;/&quot;</span>,<span class="st">&quot;--&quot;</span>), <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb9-3"><a href="data.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># read in releases excel file </span></span>
<span id="cb9-4"><a href="data.html#cb9-4" aria-hidden="true" tabindex="-1"></a>releases_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_collection/QT_total releases_total.xlsx&quot;</span>, <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;/&quot;</span>,<span class="st">&quot;--&quot;</span>), <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb9-5"><a href="data.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># read in imprisonment rate excel file </span></span>
<span id="cb9-6"><a href="data.html#cb9-6" aria-hidden="true" tabindex="-1"></a>rate_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_collection/QT_imprisonment rate_total.xlsx&quot;</span>, <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;/&quot;</span>,<span class="st">&quot;--&quot;</span>), <span class="at">skip =</span> <span class="dv">9</span>)</span>
<span id="cb9-7"><a href="data.html#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="data.html#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="data.html#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the first column (get rid of jurisdiction)</span></span>
<span id="cb9-10"><a href="data.html#cb9-10" aria-hidden="true" tabindex="-1"></a>admissions_data <span class="ot">&lt;-</span> <span class="fu">select</span>(admissions_data, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>))</span>
<span id="cb9-11"><a href="data.html#cb9-11" aria-hidden="true" tabindex="-1"></a>releases_data <span class="ot">&lt;-</span> <span class="fu">select</span>(releases_data, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>))</span>
<span id="cb9-12"><a href="data.html#cb9-12" aria-hidden="true" tabindex="-1"></a>rate_data <span class="ot">&lt;-</span> <span class="fu">select</span>(rate_data, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>))</span>
<span id="cb9-13"><a href="data.html#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="data.html#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="data.html#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># rename column to State</span></span>
<span id="cb9-16"><a href="data.html#cb9-16" aria-hidden="true" tabindex="-1"></a>admissions_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(admissions_data, <span class="at">State =</span> <span class="st">&quot;...2&quot;</span>)</span>
<span id="cb9-17"><a href="data.html#cb9-17" aria-hidden="true" tabindex="-1"></a>releases_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(releases_data, <span class="at">State =</span> <span class="st">&quot;...2&quot;</span>)</span>
<span id="cb9-18"><a href="data.html#cb9-18" aria-hidden="true" tabindex="-1"></a>rate_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(rate_data, <span class="at">State =</span> <span class="st">&quot;...2&quot;</span>)</span>
<span id="cb9-19"><a href="data.html#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="data.html#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># filter out missing values</span></span>
<span id="cb9-21"><a href="data.html#cb9-21" aria-hidden="true" tabindex="-1"></a>admissions_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(admissions_data, <span class="fu">is.na</span>(State) <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-22"><a href="data.html#cb9-22" aria-hidden="true" tabindex="-1"></a>releases_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(releases_data, <span class="fu">is.na</span>(State) <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-23"><a href="data.html#cb9-23" aria-hidden="true" tabindex="-1"></a>rate_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(rate_data, <span class="fu">is.na</span>(State) <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-24"><a href="data.html#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="data.html#cb9-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-26"><a href="data.html#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co"># get rid of side descriptions </span></span>
<span id="cb9-27"><a href="data.html#cb9-27" aria-hidden="true" tabindex="-1"></a>admissions_data <span class="ot">&lt;-</span> <span class="fu">head</span>(admissions_data, <span class="sc">-</span> <span class="dv">9</span>) </span>
<span id="cb9-28"><a href="data.html#cb9-28" aria-hidden="true" tabindex="-1"></a>releases_data <span class="ot">&lt;-</span> <span class="fu">head</span>(releases_data, <span class="sc">-</span> <span class="dv">10</span>) </span>
<span id="cb9-29"><a href="data.html#cb9-29" aria-hidden="true" tabindex="-1"></a>rate_data <span class="ot">&lt;-</span> <span class="fu">head</span>(rate_data, <span class="sc">-</span> <span class="dv">10</span>) </span></code></pre></div>
<p>Next, we proceed to relabel the State and Year columns by removing extra characters that do not provide significance in our visualizations.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reformatting State columns </span></span>
<span id="cb10-2"><a href="data.html#cb10-2" aria-hidden="true" tabindex="-1"></a>bad <span class="ot">&lt;-</span> admissions_data[<span class="fu">which</span>(<span class="fu">str_detect</span>(admissions_data<span class="sc">$</span>State , <span class="st">&#39;[:punct:]&#39;</span>)),]<span class="sc">$</span>State</span>
<span id="cb10-3"><a href="data.html#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="data.html#cb10-4" aria-hidden="true" tabindex="-1"></a>admissions_data[<span class="fu">which</span>(<span class="fu">str_detect</span>(admissions_data<span class="sc">$</span>State , <span class="st">&#39;[:punct:]&#39;</span>)),]<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">str_sub</span>(bad, <span class="at">end =</span> <span class="sc">-</span><span class="dv">3</span>)</span>
<span id="cb10-5"><a href="data.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="data.html#cb10-6" aria-hidden="true" tabindex="-1"></a>bad_1 <span class="ot">&lt;-</span> admissions_data[<span class="fu">which</span>(<span class="fu">str_detect</span>(releases_data<span class="sc">$</span>State , <span class="st">&#39;[:punct:]&#39;</span>)),]<span class="sc">$</span>State</span>
<span id="cb10-7"><a href="data.html#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="data.html#cb10-8" aria-hidden="true" tabindex="-1"></a>releases_data[<span class="fu">which</span>(<span class="fu">str_detect</span>(releases_data<span class="sc">$</span>State , <span class="st">&#39;[:punct:]&#39;</span>)),]<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">str_sub</span>(bad_1, <span class="at">end =</span> <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb10-9"><a href="data.html#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="data.html#cb10-10" aria-hidden="true" tabindex="-1"></a>bad_2 <span class="ot">&lt;-</span> admissions_data[<span class="fu">which</span>(<span class="fu">str_detect</span>(rate_data<span class="sc">$</span>State , <span class="st">&#39;[:punct:]&#39;</span>)),]<span class="sc">$</span>State</span>
<span id="cb10-11"><a href="data.html#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="data.html#cb10-12" aria-hidden="true" tabindex="-1"></a>rate_data[<span class="fu">which</span>(<span class="fu">str_detect</span>(rate_data<span class="sc">$</span>State , <span class="st">&#39;[:punct:]&#39;</span>)),]<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">str_sub</span>(bad_2, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb10-13"><a href="data.html#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="data.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># rename certain year column </span></span>
<span id="cb10-15"><a href="data.html#cb10-15" aria-hidden="true" tabindex="-1"></a>admissions_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(admissions_data, <span class="st">&#39;2013&#39;</span> <span class="ot">=</span> <span class="st">&quot;2013/b&quot;</span>)</span>
<span id="cb10-16"><a href="data.html#cb10-16" aria-hidden="true" tabindex="-1"></a>releases_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(releases_data, <span class="st">&#39;2013&#39;</span> <span class="ot">=</span> <span class="st">&quot;2013/b,c&quot;</span>, <span class="st">&#39;2014&#39;</span> <span class="ot">=</span> <span class="st">&#39;2014/c&#39;</span>, <span class="st">&#39;2015&#39;</span> <span class="ot">=</span> <span class="st">&#39;2015/c&#39;</span>)</span></code></pre></div>
<p>All of the three tables are in xlsx format so we will use <code>readxl</code> package to import it into R. These tables have the total number of prison admissions, releases, and imprisonment rates by year and by state. The states are along a column and the years are along a row so we will <code>pivot_longer()</code> function so that the final table has state, year and number of prisoners admitted/released/rates as columns.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb11-2"><a href="data.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># admissions data to long format</span></span>
<span id="cb11-3"><a href="data.html#cb11-3" aria-hidden="true" tabindex="-1"></a>admissions_data_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(admissions_data, <span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(admissions_data) , <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Admissions&quot;</span>)</span>
<span id="cb11-4"><a href="data.html#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="data.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># releases data to long format</span></span>
<span id="cb11-6"><a href="data.html#cb11-6" aria-hidden="true" tabindex="-1"></a>releases_data_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(releases_data, <span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(releases_data) , <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Releases&quot;</span>)</span>
<span id="cb11-7"><a href="data.html#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="data.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># rate data to long format</span></span>
<span id="cb11-9"><a href="data.html#cb11-9" aria-hidden="true" tabindex="-1"></a>rate_data_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(rate_data, <span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(rate_data) , <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Rate&quot;</span>)</span></code></pre></div>
<p>Now that we have converted all three data frames into the desired long format, we can proceed to apply an inner join on the admissions_data_long and releases_data_long by State and Year. Then we apply another inner join on the resulting data frame with the rate_data_long. Now we have one clean table that encapsulates five columns: State, Year, Admissions, Releases, and Rate and 1,512 rows of entries.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inner merge on admissions and releases data</span></span>
<span id="cb12-2"><a href="data.html#cb12-2" aria-hidden="true" tabindex="-1"></a>admissions_releases_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x=</span>admissions_data_long, <span class="at">y=</span>releases_data_long, </span>
<span id="cb12-3"><a href="data.html#cb12-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;State&quot;</span>, <span class="st">&quot;Year&quot;</span>))</span>
<span id="cb12-4"><a href="data.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inner merge on admissions_releases_data and rate_data_long</span></span>
<span id="cb12-5"><a href="data.html#cb12-5" aria-hidden="true" tabindex="-1"></a>total_imprisonment_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x=</span>admissions_releases_data, <span class="at">y=</span>rate_data_long, </span>
<span id="cb12-6"><a href="data.html#cb12-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;State&quot;</span>, <span class="st">&quot;Year&quot;</span>))</span>
<span id="cb12-7"><a href="data.html#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="data.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># adding factor levels to State and Year</span></span>
<span id="cb12-9"><a href="data.html#cb12-9" aria-hidden="true" tabindex="-1"></a>total_imprisonment_data<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(total_imprisonment_data<span class="sc">$</span>State)</span>
<span id="cb12-10"><a href="data.html#cb12-10" aria-hidden="true" tabindex="-1"></a>total_imprisonment_data<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(total_imprisonment_data<span class="sc">$</span>Year)</span></code></pre></div>
</div>
</div>
<div id="missing-value-analysis" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Missing value analysis<a href="data.html#missing-value-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="crime-3" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Crime<a href="data.html#crime-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We visualize the missing data in the transformed crime data table</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span>
<span id="cb13-2"><a href="data.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(crime_all_data)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>There are no missing values in Year, State, Area and Population. There are some missing values in crime categories other than arson, which we checked is actually blank in the raw data. For now, we will keep the missing values as they are and impute values based on the graphics we decide to plot. Arson has been blank or missing in all raw data across all years so we will drop that column.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data.html#cb14-1" aria-hidden="true" tabindex="-1"></a>crime_all_data <span class="ot">&lt;-</span> crime_all_data[, <span class="sc">-</span><span class="dv">14</span>]</span></code></pre></div>
</div>
<div id="imprisonment-3" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Imprisonment<a href="data.html#imprisonment-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are missing values through Admissions, Releases, and Rate values across States. However, the numbers are quite insignificant in comparison to the available data that is present in the <code>total_imprisonment_data</code> data frame.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb15-2"><a href="data.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># creating missing values list </span></span>
<span id="cb15-3"><a href="data.html#cb15-3" aria-hidden="true" tabindex="-1"></a>missing_values <span class="ot">&lt;-</span> total_imprisonment_data <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="data.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;key&quot;</span>, <span class="at">value =</span> <span class="st">&quot;val&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="data.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isna =</span> <span class="fu">is.na</span>(val)) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="data.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(key) <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a href="data.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="data.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(key, total, isna) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="data.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num.isna =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb15-10"><a href="data.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> num.isna <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb15-11"><a href="data.html#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="data.html#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="data.html#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co"># leveling Missing v. Present</span></span>
<span id="cb15-14"><a href="data.html#cb15-14" aria-hidden="true" tabindex="-1"></a>levels <span class="ot">&lt;-</span></span>
<span id="cb15-15"><a href="data.html#cb15-15" aria-hidden="true" tabindex="-1"></a>    (missing_values  <span class="sc">%&gt;%</span> <span class="fu">filter</span>(isna <span class="sc">==</span> T) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(pct)))<span class="sc">$</span>key</span>
<span id="cb15-16"><a href="data.html#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="data.html#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co"># bar chart of missing value percentages (total_imprisonment_data)</span></span>
<span id="cb15-18"><a href="data.html#cb15-18" aria-hidden="true" tabindex="-1"></a>missing_percentage_plot <span class="ot">&lt;-</span> missing_values <span class="sc">%&gt;%</span></span>
<span id="cb15-19"><a href="data.html#cb15-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb15-20"><a href="data.html#cb15-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key, <span class="fu">desc</span>(pct)), </span>
<span id="cb15-21"><a href="data.html#cb15-21" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y =</span> pct, <span class="at">fill=</span>isna), </span>
<span id="cb15-22"><a href="data.html#cb15-22" aria-hidden="true" tabindex="-1"></a>                   <span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb15-23"><a href="data.html#cb15-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span> <span class="fu">reorder</span>(key, <span class="fu">desc</span>(pct)), </span>
<span id="cb15-24"><a href="data.html#cb15-24" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> pct, <span class="at">label =</span> <span class="fu">round</span>(pct, <span class="at">digits =</span> <span class="dv">3</span>))) <span class="sc">+</span></span>
<span id="cb15-25"><a href="data.html#cb15-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> levels) <span class="sc">+</span></span>
<span id="cb15-26"><a href="data.html#cb15-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb15-27"><a href="data.html#cb15-27" aria-hidden="true" tabindex="-1"></a>                        <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;steelblue&#39;</span>, <span class="st">&#39;tomato3&#39;</span>), </span>
<span id="cb15-28"><a href="data.html#cb15-28" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Present&quot;</span>, <span class="st">&quot;Missing&quot;</span>)) <span class="sc">+</span></span>
<span id="cb15-29"><a href="data.html#cb15-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb15-30"><a href="data.html#cb15-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Percentage of missing values&quot;</span>, <span class="at">x =</span></span>
<span id="cb15-31"><a href="data.html#cb15-31" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;Variable&#39;</span>, <span class="at">y =</span> <span class="st">&quot;% of missing values&quot;</span>)</span>
<span id="cb15-32"><a href="data.html#cb15-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-33"><a href="data.html#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="co">#  plotting each row in the dataset of missing values (total_imprisonment_data)</span></span>
<span id="cb15-34"><a href="data.html#cb15-34" aria-hidden="true" tabindex="-1"></a>missing_row_plot <span class="ot">&lt;-</span> total_imprisonment_data <span class="sc">%&gt;%</span></span>
<span id="cb15-35"><a href="data.html#cb15-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb15-36"><a href="data.html#cb15-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="sc">-</span>id, <span class="at">key =</span> <span class="st">&quot;key&quot;</span>, <span class="at">value =</span> <span class="st">&quot;val&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-37"><a href="data.html#cb15-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isna =</span> <span class="fu">is.na</span>(val)) <span class="sc">%&gt;%</span></span>
<span id="cb15-38"><a href="data.html#cb15-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(key, id, <span class="at">fill =</span> isna)) <span class="sc">+</span></span>
<span id="cb15-39"><a href="data.html#cb15-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb15-40"><a href="data.html#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb15-41"><a href="data.html#cb15-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;steelblue&#39;</span>, <span class="st">&#39;tomato3&#39;</span>),</span>
<span id="cb15-42"><a href="data.html#cb15-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Present&quot;</span>, <span class="st">&quot;Missing&quot;</span>)) <span class="sc">+</span></span>
<span id="cb15-43"><a href="data.html#cb15-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> levels) <span class="sc">+</span></span>
<span id="cb15-44"><a href="data.html#cb15-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Variable&quot;</span>,</span>
<span id="cb15-45"><a href="data.html#cb15-45" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="st">&quot;Row Number&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Missing values in rows&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-46"><a href="data.html#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code></pre></div>
<p>According to the bar chart, Only 1.2% of Releases and Rate data are missing. Admissions takes the lead with 1.39% of missing values. We also plotted the missing values of rows in order to see if there is a pattern across different features. It seems that the missing values originate from a single row – indicating that they are related to a specific state.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;gridExtra&quot;</span>) <span class="co"># for multiple plots</span></span>
<span id="cb16-2"><a href="data.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(missing_percentage_plot, missing_row_plot, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Now we will highlight missing values of specific States. There some missing values for Alabama and New Hampshire for Admissions data. There are also missing values across all variables for District of Columbia from 2001-2019 since sentenced felons were the responsibility of the Federal Bureau of Prisons during these years. We will keep these entries since we are simply visualizing information provided from the National Prisoner Statistics (NPS) program.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting missing values percentages</span></span>
<span id="cb17-2"><a href="data.html#cb17-2" aria-hidden="true" tabindex="-1"></a>missing_values_states <span class="ot">&lt;-</span> total_imprisonment_data <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="data.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="data.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Admissions =</span> <span class="dv">100</span><span class="sc">*</span><span class="fu">length</span>(<span class="fu">grep</span>(T, <span class="fu">is.na</span>(Admissions)))<span class="sc">/</span> <span class="fu">nrow</span>(total_imprisonment_data),</span>
<span id="cb17-5"><a href="data.html#cb17-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Releases =</span> <span class="dv">100</span><span class="sc">*</span><span class="fu">length</span>(<span class="fu">grep</span>(T, <span class="fu">is.na</span>(Releases)))<span class="sc">/</span>  <span class="fu">nrow</span>(total_imprisonment_data), </span>
<span id="cb17-6"><a href="data.html#cb17-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">Rate =</span> <span class="dv">100</span><span class="sc">*</span><span class="fu">length</span>(<span class="fu">grep</span>(T, <span class="fu">is.na</span>(Rate)))<span class="sc">/</span> <span class="fu">nrow</span>(total_imprisonment_data)) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="data.html#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="data.html#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Missing =</span> value, <span class="at">variable =</span> name) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="data.html#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Present =</span> <span class="dv">100</span><span class="sc">-</span>Missing) <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="data.html#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">:-</span><span class="dv">2</span>), <span class="at">names_to =</span> <span class="st">&quot;NA_Status&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="data.html#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(value <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> value <span class="sc">&lt;</span> <span class="dv">100</span>)</span>
<span id="cb17-12"><a href="data.html#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="data.html#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># highlighting missing states values</span></span>
<span id="cb17-14"><a href="data.html#cb17-14" aria-hidden="true" tabindex="-1"></a>missing_states_plot <span class="ot">&lt;-</span> missing_values_states <span class="sc">%&gt;%</span></span>
<span id="cb17-15"><a href="data.html#cb17-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-16"><a href="data.html#cb17-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span> State) <span class="sc">+</span></span>
<span id="cb17-17"><a href="data.html#cb17-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable, </span>
<span id="cb17-18"><a href="data.html#cb17-18" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y =</span> value, <span class="at">fill=</span>NA_Status), </span>
<span id="cb17-19"><a href="data.html#cb17-19" aria-hidden="true" tabindex="-1"></a>                   <span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb17-20"><a href="data.html#cb17-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable, </span>
<span id="cb17-21"><a href="data.html#cb17-21" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y =</span> value, <span class="at">label =</span> <span class="fu">round</span>(<span class="fu">rev</span>(value), <span class="at">digits =</span> <span class="dv">3</span>))) <span class="sc">+</span></span>
<span id="cb17-22"><a href="data.html#cb17-22" aria-hidden="true" tabindex="-1"></a>      <span class="co">#scale_x_discrete(limits = levels) +</span></span>
<span id="cb17-23"><a href="data.html#cb17-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb17-24"><a href="data.html#cb17-24" aria-hidden="true" tabindex="-1"></a>                        <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;steelblue&#39;</span>, <span class="st">&#39;tomato3&#39;</span>), </span>
<span id="cb17-25"><a href="data.html#cb17-25" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Present&quot;</span>, <span class="st">&quot;Missing&quot;</span>)) <span class="sc">+</span></span>
<span id="cb17-26"><a href="data.html#cb17-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Percentage of missing values&quot;</span>, <span class="at">x =</span></span>
<span id="cb17-27"><a href="data.html#cb17-27" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;Variable&#39;</span>, <span class="at">y =</span> <span class="st">&quot;% of missing values&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Missing Values from District of Columbia and Alabama&quot;</span>)</span>
<span id="cb17-28"><a href="data.html#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="data.html#cb17-29" aria-hidden="true" tabindex="-1"></a>missing_states_plot</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="proposal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/naishadhparmar/Crime-Data-Analysis/edit/main/data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/naishadhparmar/Crime-Data-Analysis/blob/main/data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
